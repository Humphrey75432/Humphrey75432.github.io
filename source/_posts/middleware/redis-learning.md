---
title: Redis盘点梳理
date: 2022-02-21 21:41:10
updated: 2022-02-21 21:41:10
tags: Redis
categories: 消息中间件
---

# Redis数据类型



# Redis缓存

## Redis缓存雪崩

### 成因

同一时间大批量数据失效导致Redis变成不存在，请求压力全部落到数据源导致系统压力增加；

### 解决方案

分布式部署，设置热点数据永不过期，有更新操作再刷新Redis缓存，或者是给Redis缓存key失效时间加随机值



## Redis缓存击穿

### 成因

某个热点数据失效，大量针对这个数据的请求会穿透缓存到数据库

### 解决方案

可以使用互斥锁更新，保证同一个进程中针对同一个数据不会并发请求到 DB，减小 DB 压力。

使用随机退避方式，失效时随机 sleep 一个很短的时间，再次查询，如果失败再执行更新。

针对多个热点 key 同时失效的问题，可以在缓存时使用固定时间加上一个小的随机数，避免大量热点 key 同一时刻失效。



## Redis缓存穿透

### 成因

缓存和数据库中都没有的数据，用户不断发起请求，导致数据库的压力增大，从而搞垮系统；一般出现这种情况是因为没有对参数做校验导致。

### 解决方案

+ 对于不存在的用户，在缓存中保存一个空对象标记，防止相同ID再次访问DB；但是这个方法不能解决问题；

+ 使用布隆过滤器，特点是数据的唯一性校验，存在为true，不存在为false，非常适合解决这些问题；



# Redis持久化操作

RDB：**RDB** 持久化机制，是对 **Redis** 中的数据执行**周期性**的持久化。

AOF：**AOF** 机制对每条写入命令作为日志，以 **append-only** 的模式写入一个日志文件中，因为这个模式是只追加的方式，所以没有任何磁盘寻址的开销，所以很快，有点像Mysql中的**binlog**。

## RDB



## AOF
